<script>
        let rankingAtual = 'geral';

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            carregarRanking();
            atualizarEstatisticas();
        });

        // Fun√ß√£o para carregar ranking real da API
        async function carregarRanking() {
            const tbody = document.getElementById('ranking-body');
            tbody.innerHTML = '<tr><td colspan="4">Carregando...</td></tr>';
            
            try {
                const response = await fetchAuthenticated(`http://localhost:3002/api/users/ranking?tipo=${rankingAtual}`);
                const data = await response.json();

                tbody.innerHTML = '';
                
                if (data.success && data.ranking && data.ranking.length > 0) {
                    data.ranking.forEach((usuario, index) => {
                        const tr = document.createElement('tr');
                        tr.innerHTML = `
                            <td class="posicao">${usuario.posicao}</td>
                            <td>${usuario.nome}</td>
                            <td class="xp">${usuario.xp.toLocaleString()}</td>
                            <td class="status">
                                <span class="status-badge status-${usuario.status}">
                                    ${usuario.status === 'premium' ? 'Premium' : 'Gratuito'}
                                </span>
                            </td>
                        `;
                        tbody.appendChild(tr);
                    });
                } else {
                    tbody.innerHTML = '<tr><td colspan="4">Nenhum usu√°rio encontrado</td></tr>';
                }
            } catch (error) {
                console.error('Erro ao carregar ranking:', error);
                tbody.innerHTML = '<tr><td colspan="4">Erro ao carregar dados</td></tr>';
            }
        }

        // Fun√ß√£o para filtrar ranking
        function filtrarRanking(tipo) {
            rankingAtual = tipo;
            
            // Atualizar bot√µes
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            // event.target pode n√£o ser o bot√£o, ent√£o buscar pelo ID ou classe
            const targetButton = document.querySelector(`.filter-btn[onclick*='${tipo}']`);
            if (targetButton) {
                targetButton.classList.add('active');
            }
            
            // Atualizar t√≠tulo e descri√ß√£o
            const titulos = {
                'geral': 'üèÜ Top 20 - Ranking Geral',
                'mensal': 'üìÖ Top 10 - Ranking Mensal',
                'semanal': 'üìä Top 10 - Ranking Semanal'
            };
            
            const descricoes = {
                'geral': 'Atualizado em tempo real',
                'mensal': 'Ranking do m√™s atual',
                'semanal': 'Ranking da semana atual'
            };
            
            document.getElementById('rankingTitulo').textContent = titulos[tipo];
            document.getElementById('rankingDescricao').textContent = descricoes[tipo];
            
            carregarRanking();
        }

        // Fun√ß√£o para atualizar estat√≠sticas reais
        async function atualizarEstatisticas() {
            try {
                const response = await fetchAuthenticated('http://localhost:3002/api/admin/dashboard', {
                    method: 'GET'
                });
                const data = await response.json();

                if (data.success && data.stats) {
                    document.getElementById('totalUsuarios').textContent = data.stats.totalUsuarios.toLocaleString();
                    document.getElementById('totalQuestoes').textContent = data.stats.totalQuestoes.toLocaleString();
                    document.getElementById('questoesRespondidas').textContent = data.stats.totalRespostas.toLocaleString();
                    document.getElementById('mediaXP').textContent = Math.round(data.stats.mediaXP || 0).toLocaleString();
                } else {
                    console.error('Erro ao carregar estat√≠sticas do dashboard:', data.message || 'Erro desconhecido');
                    // Manter valores padr√£o em caso de erro
                    document.getElementById('totalUsuarios').textContent = '0';
                    document.getElementById('totalQuestoes').textContent = '0';
                    document.getElementById('questoesRespondidas').textContent = '0';
                    document.getElementById('mediaXP').textContent = '0';
                }
            } catch (error) {
                console.error('Erro de rede ao carregar estat√≠sticas:', error);
                // Manter valores padr√£o em caso de erro
                document.getElementById('totalUsuarios').textContent = '0';
                document.getElementById('totalQuestoes').textContent = '0';
                document.getElementById('questoesRespondidas').textContent = '0';
                document.getElementById('mediaXP').textContent = '0';
            }
        }

        // Remover simula√ß√£o de atualiza√ß√£o em tempo real
        // setInterval(() => { /* ... */ }, 30000);
    
</script>